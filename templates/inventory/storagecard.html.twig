{% extends 'base.html.twig' %}

{% block stylesheets %}
    <!-- Datepicker -->
    <link rel="stylesheet" href="{{ asset('assets/bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css') }}">
    <!-- Select2 -->
    <link rel="stylesheet" href="{{ asset('assets/bower_components/select2/dist/css/select2.min.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/css/general_style.css') }}">
{% endblock %}

{% block title %}
Khemeia | Création d'une fiche de stockage
{% endblock %}

{% block body %}
    <div class="panel box box-warning">
        <div class="box-header with-border">
            <h4 class="box-title">
            {% if action == 'create' %}
                Création d'une fiche de stockage
            {% elseif action == 'copy' %}
                Dupliquer une fiche de stockage
            {% elseif action == 'modify' %}
                Modifier une fiche de stockage
            {% endif %}
            </h4>
        </div>
        <div class="nav-tabs-custom">
            <div class="tab-content">
                <div class="tab-pane active" id="tab_1">
                    <div class="box-body">
                        {{ form_start(form) }}
                            <!-- select -->
                            <div class="form-group">
                                <label>Produit chimique concerné</label><span class="text-red"> *</span>
                                
                                {{ form_widget(form.idChimicalproduct, {'attr': {'class': 'form-control select2 select2-hidden-accessible form-style' ,
                                 'style':"width: 100%;",
                                 'required':'required',
                                 'data-placeholder':"Selectionnez un produit chimique",
                                 'tabindex':"-1"}}) }}
                            </div>

                            <div class="form-group">
                                <label>Emplacement</label><span class="text-red"> *</span>
                                {{ form_widget(form.idShelvingunit, {'attr': {'class': 'form-control select2 select2-hidden-accessible form-style' ,
                                 'style':"width: 100%;",
                                 'required':'required',
                                'data-placeholder':'Selectionez l\'emplacement de ce produit',
                                'tabindex':"-1"}}) }}
                            </div>

                            <!-- text input -->
                            <div class="form-group">
                                <label>Quantité en stock </label> (en g ou ml)
                                {{ form_widget(form.stockquantity, {'attr': {'class': 'form-control',
                                'placeholder': 'Entrez une quantité'}}) }}
                            </div>

                            <div class="form-group">
                                <label>Capacité totale </label> (en g ou ml)
                                {{ form_widget(form.capacity, {'attr': {'class': 'form-control',
                                'placeholder': 'Entrez une capacité'}}) }}
                            </div>

                            <div class="form-group">
                                <label>Pureté</label>
                                {{ form_widget(form.purity, {'attr': {'class': 'form-control',
                                'placeholder': 'Entrez la pureté du produit'}}) }}
                            </div>

                            <div class="form-group">
                                <label>Température de stockage</label> en °C
                                {{ form_widget(form.temperature, {'attr': {'class': 'form-control',
                                'placeholder': 'Entrez la température de stockage du produit'}}) }}
                            </div>

                            <div class="form-group">
                                <label>Numéro de série</label>
                                {{ form_widget(form.serialnumber, {'attr': {'class': 'form-control',
                                'placeholder': 'Entrez un numéro de série'}}) }}
                            </div>

                            <!-- datepicker -->
                            <div class="form-group">
                                <label>{{ form_label(form.opendate) }}</label>

                                <div class="input-group date">
                                    <div class="input-group-addon">
                                    <i class="fa fa-calendar"></i>
                                    </div>
                                    {{ form_widget(form.opendate, {'attr': {'class': 'form-control pull-right datepicker',
                                    'data-date-language':'fr'}}) }}
                                </div>
                            </div>

                            <!-- datepicker -->
                            <div class="form-group">
                                <label>{{ form_label(form.expirationdate) }}</label>

                                <div class="input-group date">
                                    <div class="input-group-addon">
                                    <i class="fa fa-calendar"></i>
                                    </div>
                                    {{ form_widget(form.expirationdate, {'attr': {'class': 'form-control pull-right datepicker',
                                    'data-date-language':'fr'}}) }}
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Faut-il archiver ce produit?</label><span class="text-red"> *</span>
                                <div class="radio-style">
                                    {{ form_widget(form.isarchived, {'label_attr': {'class': 'radio-label'}},) }}
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Voulez-vous cacher l'emplacement exact de ce flacon?</label><span class="text-red"> *</span>
                                <div class="radio-style">
                                    {{ form_widget(form.isrisked, {'label_attr': {'class': 'radio-label'}},) }}
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Propriétaire du flacon</label>
                                {{ form_widget(form.idProperty, {'attr': {'class': 'form-control select2 select2-hidden-accessible form-style' ,
                                 'style':"width: 100%;",
                                'data-placeholder':'Selectionez le propriétaire de ce produit',
                                'tabindex':"-1"}}) }}
                            </div>

                            <div class="form-group">
                                <label>Fiche de prudence </label> (fichier PDF)
                                {{ form_widget(form.uploadedSecurityFile, {'attr': {'class': 'form-control'}}) }}
                            </div>

                            <div class="form-group">
                                <label>Certificat d'analyse </label> (fichier PDF)
                                {{ form_widget(form.uploadedAnalysisFile, {'attr': {'class': 'form-control'}}) }}
                            </div>

                            <div class="form-group">
                                <label>Fournisseur</label>
                                {{ form_widget(form.idSupplier, {'attr': {'class': 'form-control select2 select2-hidden-accessible form-style' ,
                                 'style':"width: 100%;",
                                'data-placeholder': 'Selectionnez le fournisseur de ce produit',
                                'tabindex':"-1"}}) }}
                            </div>

                            <div class="form-group">
                                <label>Référence du produit chez le fournisseur</label>
                                {{ form_widget(form.reference, {'attr': {'class': 'form-control',
                                'placeholder': 'Entrez la référence fournisseur du produit'}}) }}
                            </div>

                            <div class="form-group"><span class="text-red"> *</span>
                                <label>Voulez-vous publier directement ce produit et le rendre consultable ou le placer en analyse?</label>
                                <div class="radio-style">
                                    {{ form_widget(form.ispublished, {'label_attr': {'class': 'radio-label'}},) }}
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Commentaires</label>
                                {{ form_widget(form.commentary, {'attr': {'class': 'form-control',
                                    'placeholder': 'Entrez les informations complémentaires que vous souhaitez'}}) }}
                            </div>
                                
                            {{ form_rest(form) }}
                        
                        {% if action == 'create' %}
                            <div class="box-footer">
                                <button type="submit" class="btn btn-warning">Ajouter</button>
                            </div>
                        {% elseif action == 'copy' %}
                            <div class="box-footer">
                                <button type="submit" class="btn bg-maroon">Dupliquer</button>
                            </div>
                        {% elseif action == 'modify' %}
                            <div class="box-footer">
                                <button type="submit" class="btn btn-success">Modifier</button>
                            </div>
                        {% endif %}
                        {{ form_end(form) }}
                    </div><!-- /.box-body -->
                </div><!-- /.tab-pane -->
            </div><!-- /.tab-content -->
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    <!-- bootstrap datepicker -->
    <script src="{{ asset('assets/bower_components/bootstrap-datepicker/js/bootstrap-datepicker.js') }}"></script>
    <!-- Language script -->
    <script src="{{ asset('assets/bower_components/bootstrap-datepicker/js/locales/bootstrap-datepicker.fr.js') }}"></script>

    <!-- Code javaScript qui paramètre le widget des dates -->
    <script type="text/javascript">
        $(document).ready(function(){
            $('.datepicker').datepicker({
            "format": "dd/mm/yyyy",
            "language": "fr",
            "keyboardNavigation": false,
            "setDate": new Date(),
            "autoclose": true,
            "clearBtn": true,
            "todayHighlight": true
            });
        });
    </script>
    <!-- Select2 -->
    <script src="{{ asset('assets/bower_components/select2/dist/js/select2.full.min.js') }}"></script>
    <!-- Page script -->
    <script>
        $(document).ready(function () {
            //Initialize Select2 Elements
            $('.select2').select2()
        });
    </script>
{% endblock %}